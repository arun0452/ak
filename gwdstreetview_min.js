(function(){'use strict';var d=function(a,b,c){a=parseInt(a.getAttribute(b),10);isNaN(a)&&(a=c);return a},e=function(a,b){a=parseFloat(a.getAttribute(b));isFinite(a)||(a=null);return a};var f=function(a){return"gwd-page"==a.tagName.toLowerCase()||"gwd-page"==a.getAttribute("is")},g=function(a){if(f(a))return a;for(;a&&9!=a.nodeType;)if((a=a.parentElement)&&f(a))return a;return null};var h=function(a){var b=document.createEvent("Event");b.initEvent("ready",!0,!0);a.dispatchEvent(b)},k=function(a,b){var c=function(p){a.removeEventListener("load",c);b(p)};a.addEventListener("load",c)};function l(){this.B="https://www.google.com/jsapi";for(var a=["google","load"],b=window,c=0;b&&c<a.length;c++)b=b[a[c]];this.g=b?0:2;this.h=[]}l.prototype.v=function(){for(var a=this.g=0;a<this.h.length;a++)this.h[a]();this.h=[]};
l.prototype.load=function(a){a&&(0==this.g?a():this.h.push(a));if(2==this.g){this.g=1;a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=this.B;k(a,this.v.bind(this));var b=document.getElementsByTagName("script")[0];b?b.parentNode.insertBefore(a,b):document.getElementsByTagName("head")[0].appendChild(a)}};var m=null,n=function(a){m||(m=new l);m.load(function(){google.load("maps","3.28",a)})};var q=function(){};goog.inherits(q,HTMLElement);q.prototype.createdCallback=function(){this.a=0;this.u=this.w.bind(this);this.i=null;this.C=this.A.bind(this);this.o=null;this.m=this.hasAttribute("interaction");this.b=e(this,"latitude");this.c=e(this,"longitude");this.j=d(this,"heading",0);this.l=d(this,"pitch",0);this.s=d(this,"zoom",2);this.f=this.hasAttribute("key")?this.getAttribute("key"):""};
q.prototype.attachedCallback=function(){if("function"==typeof this.gwdLoad&&"function"==typeof this.gwdIsLoaded&&!this.gwdIsLoaded()){var a=g(this),b=a&&"function"==typeof a.gwdIsLoaded;(!a||b&&a.gwdIsLoaded())&&this.gwdLoad()}};q.prototype.gwdIsLoaded=function(){return 2==this.a||3==this.a};q.prototype.gwdLoad=function(){1!=this.a&&r(this)};
q.prototype.attributeChangedCallback=function(a){switch(a){case "interaction":this.m=this.hasAttribute("interaction");break;case "latitude":this.b=e(this,"latitude");break;case "longitude":this.c=e(this,"longitude");break;case "heading":this.j=d(this,"heading",0);break;case "pitch":this.l=d(this,"pitch",0);break;case "zoom":this.s=d(this,"zoom",2);break;case "key":this.f=this.hasAttribute("key")?this.getAttribute("key"):""}0!=this.a&&r(this)};
var r=function(a){if(null==a.b||null==a.c)console.error("Missing latitude or longitude:","["+a.b+", "+a.c+"]","in",a),a.a=3,h(a);else{for(a.a=1;a.firstChild;)a.removeChild(a.firstChild);if(a.m){var b=a.f,c="";b&&(c="&key="+b);n({callback:a.u,other_params:"sensor=true"+c})}else b=document.createElement("gwd-image"),c="https://maps.googleapis.com/maps/api/streetview?size="+(a.clientWidth||256)+"x"+(a.clientHeight||256)+"&location="+a.b+","+a.c+"&heading="+a.j+"&pitch="+a.l,a.f&&(c+="&key="+a.f),b.setAttribute("source",
c),b.addEventListener("ready",a.C,!1),a.appendChild(b),a.o=b,a.o.gwdLoad()}};q.prototype.A=function(){this.a=2;h(this)};q.prototype.w=function(){if(1==this.a){this.i=document.createElement("div");this.appendChild(this.i);var a={position:new google.maps.LatLng(this.b,this.c),pov:{heading:this.j,pitch:this.l},zoom:this.s,zoomControl:!0,scrollwheel:!0,scaleControl:!0,disableDoubleClickZoom:!0,disableDefaultUI:!0};new google.maps.StreetViewPanorama(this.i,a);this.a=2;h(this)}};
document.registerElement("gwd-streetview",{prototype:q.prototype});}).call(this);
